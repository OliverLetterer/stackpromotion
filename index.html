<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
		<!-- BASICS -->
        <meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Smart stack promotion of temporary classes</title>
        <meta name="description" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" type="text/css" href="css/isotope.css" media="screen" />
		<link rel="stylesheet" href="js/fancybox/jquery.fancybox.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/style.css">
		<!-- skin -->
		<link rel="stylesheet" href="skin/default.css">
    </head>

    <body>
		<section class="appear"></section>
		<div class="navbar navbar-fixed-top" role="navigation" data-0="line-height:100px; height:100px; background-color:rgba(0,0,0,0.3);" data-300="line-height:60px; height:60px; background-color:rgba(0,0,0,1);">
			 <div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="fa fa-bars color-white"></span>
					</button>
					<h1><a class="navbar-brand" href="index.html" data-0="line-height:90px;" data-300="line-height:50px;">
					</a></h1>
				</div>
			</div>
		</div>

		<section class="featured">
			<div class="container">
				<div class="row mar-bot40">
					<div class="col-md-6 col-md-offset-3">

						<div class="align-center">
							<h2 class="slogan">Smart stack promotion of temporary classes</h2>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- services -->
		<section class="section pad-bot30 bg-white">
		<div class="container">

			<div class="row mar-bot40">
				<div class="col-md-10 col-md-offset-1">
					<div class="">
						<h4 class="text-bold">Motivation</h4>
            <p>
              Algorithms can often rely on data structures for storing state and computing results. In languages, where these data structures are available as classes, except C++, they are typically allocated on the heap. If these data structures are short lived, heap allocations can be very expensive.
            </p>

            <p>Considering the following algorithm</p>
            <pre><code>
  NSMutableArray *array = [NSMutableArray array];

  for (NSInteger i = 0; i < 100; i++) {
      [array addObject:@(arc4random() % 100)];
  }

  uint32_t result = 0;
  for (NSInteger i = 0; i < 100; i++) {
      result += [array[i] integerValue];
  }

  NSLog(@"Average: %i", result / 100);
            </code></pre>

            <p><code>array</code> could be stored on the stack instead of the heap when it's maximum capacity is up front known.</p>

            <pre><code>
  NSMutableArray array = [NSMutableArray arrayWithMaximumCapacity:100];

  for (NSInteger i = 0; i < 100; i++) {
      [&array addObject:@(arc4random() % 100)];
  }

  uint32_t result = 0;
  for (NSInteger i = 0; i < 100; i++) {
      result += [&array[i] integerValue];
  }

  NSLog(@"Average: %i", result / 100);
  // automatically deallocated
            </code></pre>

            <p>Exceeding the array's maximum capacity at runtime would result in an abortion.</p>

            <p>Nested data structures can also be promoted, if their size is up front known.</p>
					</div>
				</div>
			</div>

		</div>
		</section>

		<!-- contact -->
		<section class="section appear clearfix">
			<div class="container">

				<div class="row mar-bot40">
					<div class="col-md-offset-3 col-md-6">
						<div class="section-header">
							<h2 class="section-heading animated" data-animation="bounceInUp">Download</h2>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-8 col-md-offset-2">
            <p>
              <strong>Framework</strong>
              <br>
              <a href="StackPromotion.framework 1.0.zip">StackPromotion.framework 1.0 - macOS</a>
            </p>

            <p>
              <strong>Sample code</strong>
              <br>
              <a href="main.zip">Download</a>
            </p>
					</div>
				</div>

			</div>
		</section>

	<section id="footer" class="section footer">
		<div class="container">
			<div class="row align-center copyright">
					<div class="col-sm-12"><p>Copyright &copy; 2022 Oliver Letterer - <a href="impressum.html">Impressum</a></p></div>
			</div>
		</div>

	</section>
	<a href="#header" class="scrollup"><i class="fa fa-chevron-up"></i></a>

	<script src="js/modernizr-2.6.2-respond-1.1.0.min.js"></script>
	<script src="js/jquery.js"></script>
	<script src="js/jquery.easing.1.3.js"></script>
    <script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.isotope.min.js"></script>
	<script src="js/jquery.nicescroll.min.js"></script>
	<script src="js/fancybox/jquery.fancybox.pack.js"></script>
	<script src="js/skrollr.min.js"></script>
	<script src="js/jquery.scrollTo-1.4.3.1-min.js"></script>
	<script src="js/jquery.localscroll-1.2.7-min.js"></script>
	<script src="js/stellar.js"></script>
	<script src="js/jquery.appear.js"></script>
	<script src="js/validate.js"></script>
  <script src="js/main.js"></script>
  <script src="js/confetti.js"></script>

  <script>
    confetti.start()
  </script>
	</body>
</html>
